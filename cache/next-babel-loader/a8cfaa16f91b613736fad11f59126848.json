{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport Link from 'next/link';\nimport Router, { useRouter } from 'next/router';\n/* utils */\n\n/* components */\nimport Layout from '../components/layout/Layout';\nimport UserNav from '../components/navigation/User';\n\nfunction Post(props) {\n  var router = useRouter();\n  var origin = props.origin,\n      user = props.user,\n      posts = props.posts;\n\n  function renderPosts(posts) {\n    return posts.data.map(function (post, j) {\n      return __jsx(Link, {\n        key: j,\n        href: \"/post/[slug]\",\n        as: \"/post/\".concat(post.slug)\n      }, __jsx(\"a\", {\n        className: \"card\"\n      }, __jsx(\"h3\", {\n        className: \"headline\"\n      }, post.title), __jsx(\"div\", null, __jsx(\"small\", null, post.createdAt)), __jsx(\"div\", null, __jsx(\"small\", null, \"Post by: \", post.user.firstName || '', \" \", post.user.lastName || '')), __jsx(\"p\", null, post.content)));\n    });\n  }\n\n  function loadMoreClick(_x) {\n    return _loadMoreClick.apply(this, arguments);\n  }\n\n  function _loadMoreClick() {\n    _loadMoreClick = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return Router.push({\n                pathname: '/post',\n                query: {\n                  nextPage: posts.nextPage ? posts.nextPage : 5\n                }\n              });\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _loadMoreClick.apply(this, arguments);\n  }\n\n  return __jsx(Layout, {\n    title: \"Next.js with Sequelize | Posts Page\",\n    url: \"\".concat(origin).concat(router.asPath),\n    origin: origin\n  }, __jsx(\"div\", {\n    className: \"container\"\n  }, __jsx(\"main\", null, __jsx(\"h1\", {\n    className: \"title\"\n  }, \"Sequelize & \", __jsx(\"a\", {\n    href: \"https://nextjs.org\"\n  }, \"Next.js!\")), __jsx(\"p\", {\n    className: \"description\"\n  }, __jsx(\"img\", {\n    src: \"/sequelize.svg\",\n    alt: \"Sequelize\",\n    height: \"120\",\n    style: {\n      marginRight: '1rem'\n    }\n  }), __jsx(\"img\", {\n    src: \"/nextjs.svg\",\n    alt: \"Next.js\",\n    width: \"160\"\n  })), __jsx(UserNav, {\n    props: {\n      user: user\n    }\n  }), __jsx(\"h2\", null, ' ', __jsx(Link, {\n    href: {\n      pathname: '/'\n    }\n  }, __jsx(\"a\", null, \"\\u2190 \")), \"Latest Posts\"), __jsx(\"div\", {\n    className: \"grid\"\n  }, __jsx(\"small\", {\n    style: {\n      textAlign: 'center',\n      marginTop: '0rem',\n      marginBottom: '1rem'\n    }\n  }, __jsx(Link, {\n    href: \"/post/add\"\n  }, __jsx(\"a\", null, \"+ Add Post\"))), posts.status === 'success' ? posts.data.length && renderPosts(posts) : __jsx(\"h3\", {\n    style: {\n      textAlign: 'center',\n      marginTop: '0rem',\n      marginBottom: '1rem',\n      display: 'inline-block',\n      width: '100%'\n    }\n  }, posts.error), posts.status === 'success' && __jsx(React.Fragment, null, posts.nextPage < posts.total && posts.data.length !== posts.total ? __jsx(\"button\", {\n    onClick: loadMoreClick,\n    className: \"jsx-2614092801\"\n  }, \"Next\") : __jsx(\"span\", {\n    className: \"jsx-2614092801\" + \" \" + \"span-info\"\n  }, \"no page left\"), __jsx(_JSXStyle, {\n    id: \"2614092801\"\n  }, [\"button.jsx-2614092801,.span-info.jsx-2614092801{margin:1rem auto;padding:0.5rem 1rem;border:1px solid #cecece;background-color:#fffcfc;color:#7b7b7b;outline:none;}\"]))))));\n}\n/* getServerSideProps */\n\n\nexport var __N_SSP = true;\nexport default Post;","map":null,"metadata":{},"sourceType":"module"}