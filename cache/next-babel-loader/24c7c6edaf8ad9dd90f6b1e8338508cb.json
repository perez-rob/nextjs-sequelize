{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\bobwp\\\\Desktop\\\\Coding-Bootcamp\\\\Test-Projects\\\\nextjs-sequelize\\\\pages\\\\post.js\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport Link from 'next/link';\nimport Router, { useRouter } from 'next/router';\n/* utils */\n\nimport { absoluteUrl, getAppCookies } from '../middleware/utils';\n/* components */\n\nimport Layout from '../components/layout/Layout';\nimport UserNav from '../components/navigation/User';\n\nfunction Post(props) {\n  const router = useRouter();\n  const {\n    origin,\n    user,\n    posts\n  } = props;\n\n  function renderPosts(posts) {\n    return posts.data.map((post, j) => {\n      return __jsx(Link, {\n        key: j,\n        href: \"/post/[slug]\",\n        as: `/post/${post.slug}`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 20,\n          columnNumber: 9\n        }\n      }, __jsx(\"a\", {\n        className: \"card\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 21,\n          columnNumber: 11\n        }\n      }, __jsx(\"h3\", {\n        className: \"headline\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 22,\n          columnNumber: 13\n        }\n      }, post.title), __jsx(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 23,\n          columnNumber: 13\n        }\n      }, __jsx(\"small\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 24,\n          columnNumber: 15\n        }\n      }, post.createdAt)), __jsx(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 26,\n          columnNumber: 13\n        }\n      }, __jsx(\"small\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 27,\n          columnNumber: 15\n        }\n      }, \"Post by: \", post.user.firstName || '', \" \", post.user.lastName || '')), __jsx(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 31,\n          columnNumber: 13\n        }\n      }, post.content)));\n    });\n  }\n\n  async function loadMoreClick(e) {\n    await Router.push({\n      pathname: '/post',\n      query: {\n        nextPage: posts.nextPage ? posts.nextPage : 5\n      }\n    });\n  }\n\n  return __jsx(Layout, {\n    title: \"Next.js with Sequelize | Posts Page\",\n    url: `${origin}${router.asPath}`,\n    origin: origin,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }\n  }, __jsx(\"main\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }\n  }, __jsx(\"h1\", {\n    className: \"title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 11\n    }\n  }, \"Sequelize & \", __jsx(\"a\", {\n    href: \"https://nextjs.org\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 29\n    }\n  }, \"Next.js!\")), __jsx(\"p\", {\n    className: \"description\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 11\n    }\n  }, __jsx(\"img\", {\n    src: \"/sequelize.svg\",\n    alt: \"Sequelize\",\n    height: \"120\",\n    style: {\n      marginRight: '1rem'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }\n  }), __jsx(\"img\", {\n    src: \"/nextjs.svg\",\n    alt: \"Next.js\",\n    width: \"160\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }\n  })), __jsx(UserNav, {\n    props: {\n      user: user\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 11\n    }\n  }), __jsx(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 11\n    }\n  }, ' ', __jsx(Link, {\n    href: {\n      pathname: '/'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }\n  }, __jsx(\"a\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 15\n    }\n  }, \"\\u2190 \")), \"Latest Posts\"), __jsx(\"div\", {\n    className: \"grid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 11\n    }\n  }, __jsx(\"small\", {\n    style: {\n      textAlign: 'center',\n      marginTop: '0rem',\n      marginBottom: '1rem'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }\n  }, __jsx(Link, {\n    href: \"/post/add\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 15\n    }\n  }, __jsx(\"a\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 17\n    }\n  }, \"+ Add Post\"))), posts.status === 'success' ? posts.data.length && renderPosts(posts) : __jsx(\"h3\", {\n    style: {\n      textAlign: 'center',\n      marginTop: '0rem',\n      marginBottom: '1rem',\n      display: 'inline-block',\n      width: '100%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 15\n    }\n  }, posts.error), posts.status === 'success' && __jsx(React.Fragment, null, posts.nextPage < posts.total && posts.data.length !== posts.total ? __jsx(\"button\", {\n    onClick: loadMoreClick,\n    className: \"jsx-2614092801\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 19\n    }\n  }, \"Next\") : __jsx(\"span\", {\n    className: \"jsx-2614092801\" + \" \" + \"span-info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 19\n    }\n  }, \"no page left\"), __jsx(_JSXStyle, {\n    id: \"2614092801\",\n    __self: this\n  }, \"button.jsx-2614092801,.span-info.jsx-2614092801{margin:1rem auto;padding:0.5rem 1rem;border:1px solid #cecece;background-color:#fffcfc;color:#7b7b7b;outline:none;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcYm9id3BcXERlc2t0b3BcXENvZGluZy1Cb290Y2FtcFxcVGVzdC1Qcm9qZWN0c1xcbmV4dGpzLXNlcXVlbGl6ZVxccGFnZXNcXHBvc3QuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBbUhtQixBQUl3QyxpQkFDRyxvQkFDSyx5QkFDQSx5QkFDWCxjQUNELGFBQ2YiLCJmaWxlIjoiQzpcXFVzZXJzXFxib2J3cFxcRGVza3RvcFxcQ29kaW5nLUJvb3RjYW1wXFxUZXN0LVByb2plY3RzXFxuZXh0anMtc2VxdWVsaXplXFxwYWdlc1xccG9zdC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcblxyXG5pbXBvcnQgTGluayBmcm9tICduZXh0L2xpbmsnO1xyXG5pbXBvcnQgUm91dGVyLCB7IHVzZVJvdXRlciB9IGZyb20gJ25leHQvcm91dGVyJztcclxuXHJcbi8qIHV0aWxzICovXHJcbmltcG9ydCB7IGFic29sdXRlVXJsLCBnZXRBcHBDb29raWVzIH0gZnJvbSAnLi4vbWlkZGxld2FyZS91dGlscyc7XHJcblxyXG4vKiBjb21wb25lbnRzICovXHJcbmltcG9ydCBMYXlvdXQgZnJvbSAnLi4vY29tcG9uZW50cy9sYXlvdXQvTGF5b3V0JztcclxuaW1wb3J0IFVzZXJOYXYgZnJvbSAnLi4vY29tcG9uZW50cy9uYXZpZ2F0aW9uL1VzZXInO1xyXG5cclxuZnVuY3Rpb24gUG9zdChwcm9wcykge1xyXG4gIGNvbnN0IHJvdXRlciA9IHVzZVJvdXRlcigpO1xyXG4gIGNvbnN0IHsgb3JpZ2luLCB1c2VyLCBwb3N0cyB9ID0gcHJvcHM7XHJcblxyXG4gIGZ1bmN0aW9uIHJlbmRlclBvc3RzKHBvc3RzKSB7XHJcbiAgICByZXR1cm4gcG9zdHMuZGF0YS5tYXAoKHBvc3QsIGopID0+IHtcclxuICAgICAgcmV0dXJuIChcclxuICAgICAgICA8TGluayBrZXk9e2p9IGhyZWY9XCIvcG9zdC9bc2x1Z11cIiBhcz17YC9wb3N0LyR7cG9zdC5zbHVnfWB9PlxyXG4gICAgICAgICAgPGEgY2xhc3NOYW1lPVwiY2FyZFwiPlxyXG4gICAgICAgICAgICA8aDMgY2xhc3NOYW1lPVwiaGVhZGxpbmVcIj57cG9zdC50aXRsZX08L2gzPlxyXG4gICAgICAgICAgICA8ZGl2PlxyXG4gICAgICAgICAgICAgIDxzbWFsbD57cG9zdC5jcmVhdGVkQXR9PC9zbWFsbD5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDxkaXY+XHJcbiAgICAgICAgICAgICAgPHNtYWxsPlxyXG4gICAgICAgICAgICAgICAgUG9zdCBieToge3Bvc3QudXNlci5maXJzdE5hbWUgfHwgJyd9IHtwb3N0LnVzZXIubGFzdE5hbWUgfHwgJyd9XHJcbiAgICAgICAgICAgICAgPC9zbWFsbD5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDxwPntwb3N0LmNvbnRlbnR9PC9wPlxyXG4gICAgICAgICAgPC9hPlxyXG4gICAgICAgIDwvTGluaz5cclxuICAgICAgKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgZnVuY3Rpb24gbG9hZE1vcmVDbGljayhlKSB7XHJcbiAgICBhd2FpdCBSb3V0ZXIucHVzaCh7XHJcbiAgICAgIHBhdGhuYW1lOiAnL3Bvc3QnLFxyXG4gICAgICBxdWVyeToge1xyXG4gICAgICAgIG5leHRQYWdlOiBwb3N0cy5uZXh0UGFnZSA/IHBvc3RzLm5leHRQYWdlIDogNSxcclxuICAgICAgfSxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIChcclxuICAgIDxMYXlvdXRcclxuICAgICAgdGl0bGU9XCJOZXh0LmpzIHdpdGggU2VxdWVsaXplIHwgUG9zdHMgUGFnZVwiXHJcbiAgICAgIHVybD17YCR7b3JpZ2lufSR7cm91dGVyLmFzUGF0aH1gfVxyXG4gICAgICBvcmlnaW49e29yaWdpbn1cclxuICAgID5cclxuICAgICAgPGRpdiBjbGFzc05hbWU9XCJjb250YWluZXJcIj5cclxuICAgICAgICA8bWFpbj5cclxuICAgICAgICAgIDxoMSBjbGFzc05hbWU9XCJ0aXRsZVwiPlxyXG4gICAgICAgICAgICBTZXF1ZWxpemUgJmFtcDsgPGEgaHJlZj1cImh0dHBzOi8vbmV4dGpzLm9yZ1wiPk5leHQuanMhPC9hPlxyXG4gICAgICAgICAgPC9oMT5cclxuICAgICAgICAgIDxwIGNsYXNzTmFtZT1cImRlc2NyaXB0aW9uXCI+XHJcbiAgICAgICAgICAgIDxpbWdcclxuICAgICAgICAgICAgICBzcmM9XCIvc2VxdWVsaXplLnN2Z1wiXHJcbiAgICAgICAgICAgICAgYWx0PVwiU2VxdWVsaXplXCJcclxuICAgICAgICAgICAgICBoZWlnaHQ9XCIxMjBcIlxyXG4gICAgICAgICAgICAgIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiAnMXJlbScgfX1cclxuICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgPGltZyBzcmM9XCIvbmV4dGpzLnN2Z1wiIGFsdD1cIk5leHQuanNcIiB3aWR0aD1cIjE2MFwiIC8+XHJcbiAgICAgICAgICA8L3A+XHJcbiAgICAgICAgICA8VXNlck5hdiBwcm9wcz17eyB1c2VyOiB1c2VyIH19IC8+XHJcbiAgICAgICAgICA8aDI+XHJcbiAgICAgICAgICAgIHsnICd9XHJcbiAgICAgICAgICAgIDxMaW5rXHJcbiAgICAgICAgICAgICAgaHJlZj17e1xyXG4gICAgICAgICAgICAgICAgcGF0aG5hbWU6ICcvJyxcclxuICAgICAgICAgICAgICB9fVxyXG4gICAgICAgICAgICA+XHJcbiAgICAgICAgICAgICAgPGE+JmxhcnI7IDwvYT5cclxuICAgICAgICAgICAgPC9MaW5rPlxyXG4gICAgICAgICAgICBMYXRlc3QgUG9zdHNcclxuICAgICAgICAgIDwvaDI+XHJcbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImdyaWRcIj5cclxuICAgICAgICAgICAgPHNtYWxsXHJcbiAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgIHRleHRBbGlnbjogJ2NlbnRlcicsXHJcbiAgICAgICAgICAgICAgICBtYXJnaW5Ub3A6ICcwcmVtJyxcclxuICAgICAgICAgICAgICAgIG1hcmdpbkJvdHRvbTogJzFyZW0nLFxyXG4gICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgID5cclxuICAgICAgICAgICAgICA8TGluayBocmVmPVwiL3Bvc3QvYWRkXCI+XHJcbiAgICAgICAgICAgICAgICA8YT4rIEFkZCBQb3N0PC9hPlxyXG4gICAgICAgICAgICAgIDwvTGluaz5cclxuICAgICAgICAgICAgPC9zbWFsbD5cclxuICAgICAgICAgICAge3Bvc3RzLnN0YXR1cyA9PT0gJ3N1Y2Nlc3MnID8gKFxyXG4gICAgICAgICAgICAgIHBvc3RzLmRhdGEubGVuZ3RoICYmIHJlbmRlclBvc3RzKHBvc3RzKVxyXG4gICAgICAgICAgICApIDogKFxyXG4gICAgICAgICAgICAgIDxoM1xyXG4gICAgICAgICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgICAgICAgdGV4dEFsaWduOiAnY2VudGVyJyxcclxuICAgICAgICAgICAgICAgICAgbWFyZ2luVG9wOiAnMHJlbScsXHJcbiAgICAgICAgICAgICAgICAgIG1hcmdpbkJvdHRvbTogJzFyZW0nLFxyXG4gICAgICAgICAgICAgICAgICBkaXNwbGF5OiAnaW5saW5lLWJsb2NrJyxcclxuICAgICAgICAgICAgICAgICAgd2lkdGg6ICcxMDAlJyxcclxuICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgPlxyXG4gICAgICAgICAgICAgICAge3Bvc3RzLmVycm9yfVxyXG4gICAgICAgICAgICAgIDwvaDM+XHJcbiAgICAgICAgICAgICl9XHJcblxyXG4gICAgICAgICAgICB7cG9zdHMuc3RhdHVzID09PSAnc3VjY2VzcycgJiYgKFxyXG4gICAgICAgICAgICAgIDw+XHJcbiAgICAgICAgICAgICAgICB7cG9zdHMubmV4dFBhZ2UgPCBwb3N0cy50b3RhbCAmJlxyXG4gICAgICAgICAgICAgICAgcG9zdHMuZGF0YS5sZW5ndGggIT09IHBvc3RzLnRvdGFsID8gKFxyXG4gICAgICAgICAgICAgICAgICA8YnV0dG9uIG9uQ2xpY2s9e2xvYWRNb3JlQ2xpY2t9Pk5leHQ8L2J1dHRvbj5cclxuICAgICAgICAgICAgICAgICkgOiAoXHJcbiAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInNwYW4taW5mb1wiPm5vIHBhZ2UgbGVmdDwvc3Bhbj5cclxuICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgICA8c3R5bGUganN4PlxyXG4gICAgICAgICAgICAgICAgICB7YFxyXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbixcclxuICAgICAgICAgICAgICAgICAgICAuc3Bhbi1pbmZvIHtcclxuICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbjogMXJlbSBhdXRvO1xyXG4gICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogMC41cmVtIDFyZW07XHJcbiAgICAgICAgICAgICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjY2VjZWNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZmNmYztcclxuICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAjN2I3YjdiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgb3V0bGluZTogbm9uZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIGB9XHJcbiAgICAgICAgICAgICAgICA8L3N0eWxlPlxyXG4gICAgICAgICAgICAgIDwvPlxyXG4gICAgICAgICAgICApfVxyXG4gICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgPC9tYWluPlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvTGF5b3V0PlxyXG4gICk7XHJcbn1cclxuXHJcbi8qIGdldFNlcnZlclNpZGVQcm9wcyAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0U2VydmVyU2lkZVByb3BzKGNvbnRleHQpIHtcclxuICBjb25zdCB7IHF1ZXJ5LCByZXEgfSA9IGNvbnRleHQ7XHJcbiAgY29uc3QgeyBuZXh0UGFnZSB9ID0gcXVlcnk7XHJcbiAgY29uc3QgeyBvcmlnaW4gfSA9IGFic29sdXRlVXJsKHJlcSk7XHJcblxyXG4gIGNvbnN0IHRva2VuID0gZ2V0QXBwQ29va2llcyhyZXEpLnRva2VuIHx8ICcnO1xyXG4gIGNvbnN0IHJlZmVyZXIgPSByZXEuaGVhZGVycy5yZWZlcmVyIHx8ICcnO1xyXG5cclxuICBjb25zdCBuZXh0UGFnZVVybCA9ICFpc05hTihuZXh0UGFnZSkgPyBgP25leHRQYWdlPSR7bmV4dFBhZ2V9YCA6ICcnO1xyXG4gIGNvbnN0IGJhc2VBcGlVcmwgPSBgJHtvcmlnaW59L2FwaWA7XHJcblxyXG4gIGNvbnN0IHBvc3RzQXBpID0gYXdhaXQgZmV0Y2goYCR7YmFzZUFwaVVybH0vcG9zdCR7bmV4dFBhZ2VVcmx9YCwge1xyXG4gICAgaGVhZGVyczoge1xyXG4gICAgICBhdXRob3JpemF0aW9uOiB0b2tlbiB8fCAnJyxcclxuICAgIH0sXHJcbiAgfSk7XHJcblxyXG4gIGNvbnN0IHBvc3RzID0gYXdhaXQgcG9zdHNBcGkuanNvbigpO1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgcHJvcHM6IHtcclxuICAgICAgb3JpZ2luLFxyXG4gICAgICByZWZlcmVyLFxyXG4gICAgICB0b2tlbixcclxuICAgICAgcG9zdHMsXHJcbiAgICB9LFxyXG4gIH07XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFBvc3Q7XHJcbiJdfQ== */\\n/*@ sourceURL=C:\\\\\\\\Users\\\\\\\\bobwp\\\\\\\\Desktop\\\\\\\\Coding-Bootcamp\\\\\\\\Test-Projects\\\\\\\\nextjs-sequelize\\\\\\\\pages\\\\\\\\post.js */\"))))));\n}\n/* getServerSideProps */\n\n\nexport async function getServerSideProps(context) {\n  const {\n    query,\n    req\n  } = context;\n  const {\n    nextPage\n  } = query;\n  const {\n    origin\n  } = absoluteUrl(req);\n  const token = getAppCookies(req).token || '';\n  const referer = req.headers.referer || '';\n  const nextPageUrl = !isNaN(nextPage) ? `?nextPage=${nextPage}` : '';\n  const baseApiUrl = `${origin}/api`;\n  const postsApi = await fetch(`${baseApiUrl}/post${nextPageUrl}`, {\n    headers: {\n      authorization: token || ''\n    }\n  });\n  const posts = await postsApi.json();\n  return {\n    props: {\n      origin,\n      referer,\n      token,\n      posts\n    }\n  };\n}\nexport default Post;","map":{"version":3,"sources":["C:/Users/bobwp/Desktop/Coding-Bootcamp/Test-Projects/nextjs-sequelize/pages/post.js"],"names":["React","Link","Router","useRouter","absoluteUrl","getAppCookies","Layout","UserNav","Post","props","router","origin","user","posts","renderPosts","data","map","post","j","slug","title","createdAt","firstName","lastName","content","loadMoreClick","e","push","pathname","query","nextPage","asPath","marginRight","textAlign","marginTop","marginBottom","status","length","display","width","error","total","getServerSideProps","context","req","token","referer","headers","nextPageUrl","isNaN","baseApiUrl","postsApi","fetch","authorization","json"],"mappings":"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","sourcesContent":["import React from 'react';\r\n\r\nimport Link from 'next/link';\r\nimport Router, { useRouter } from 'next/router';\r\n\r\n/* utils */\r\nimport { absoluteUrl, getAppCookies } from '../middleware/utils';\r\n\r\n/* components */\r\nimport Layout from '../components/layout/Layout';\r\nimport UserNav from '../components/navigation/User';\r\n\r\nfunction Post(props) {\r\n  const router = useRouter();\r\n  const { origin, user, posts } = props;\r\n\r\n  function renderPosts(posts) {\r\n    return posts.data.map((post, j) => {\r\n      return (\r\n        <Link key={j} href=\"/post/[slug]\" as={`/post/${post.slug}`}>\r\n          <a className=\"card\">\r\n            <h3 className=\"headline\">{post.title}</h3>\r\n            <div>\r\n              <small>{post.createdAt}</small>\r\n            </div>\r\n            <div>\r\n              <small>\r\n                Post by: {post.user.firstName || ''} {post.user.lastName || ''}\r\n              </small>\r\n            </div>\r\n            <p>{post.content}</p>\r\n          </a>\r\n        </Link>\r\n      );\r\n    });\r\n  }\r\n\r\n  async function loadMoreClick(e) {\r\n    await Router.push({\r\n      pathname: '/post',\r\n      query: {\r\n        nextPage: posts.nextPage ? posts.nextPage : 5,\r\n      },\r\n    });\r\n  }\r\n\r\n  return (\r\n    <Layout\r\n      title=\"Next.js with Sequelize | Posts Page\"\r\n      url={`${origin}${router.asPath}`}\r\n      origin={origin}\r\n    >\r\n      <div className=\"container\">\r\n        <main>\r\n          <h1 className=\"title\">\r\n            Sequelize &amp; <a href=\"https://nextjs.org\">Next.js!</a>\r\n          </h1>\r\n          <p className=\"description\">\r\n            <img\r\n              src=\"/sequelize.svg\"\r\n              alt=\"Sequelize\"\r\n              height=\"120\"\r\n              style={{ marginRight: '1rem' }}\r\n            />\r\n            <img src=\"/nextjs.svg\" alt=\"Next.js\" width=\"160\" />\r\n          </p>\r\n          <UserNav props={{ user: user }} />\r\n          <h2>\r\n            {' '}\r\n            <Link\r\n              href={{\r\n                pathname: '/',\r\n              }}\r\n            >\r\n              <a>&larr; </a>\r\n            </Link>\r\n            Latest Posts\r\n          </h2>\r\n          <div className=\"grid\">\r\n            <small\r\n              style={{\r\n                textAlign: 'center',\r\n                marginTop: '0rem',\r\n                marginBottom: '1rem',\r\n              }}\r\n            >\r\n              <Link href=\"/post/add\">\r\n                <a>+ Add Post</a>\r\n              </Link>\r\n            </small>\r\n            {posts.status === 'success' ? (\r\n              posts.data.length && renderPosts(posts)\r\n            ) : (\r\n              <h3\r\n                style={{\r\n                  textAlign: 'center',\r\n                  marginTop: '0rem',\r\n                  marginBottom: '1rem',\r\n                  display: 'inline-block',\r\n                  width: '100%',\r\n                }}\r\n              >\r\n                {posts.error}\r\n              </h3>\r\n            )}\r\n\r\n            {posts.status === 'success' && (\r\n              <>\r\n                {posts.nextPage < posts.total &&\r\n                posts.data.length !== posts.total ? (\r\n                  <button onClick={loadMoreClick}>Next</button>\r\n                ) : (\r\n                  <span className=\"span-info\">no page left</span>\r\n                )}\r\n                <style jsx>\r\n                  {`\r\n                    button,\r\n                    .span-info {\r\n                      margin: 1rem auto;\r\n                      padding: 0.5rem 1rem;\r\n                      border: 1px solid #cecece;\r\n                      background-color: #fffcfc;\r\n                      color: #7b7b7b;\r\n                      outline: none;\r\n                    }\r\n                  `}\r\n                </style>\r\n              </>\r\n            )}\r\n          </div>\r\n        </main>\r\n      </div>\r\n    </Layout>\r\n  );\r\n}\r\n\r\n/* getServerSideProps */\r\nexport async function getServerSideProps(context) {\r\n  const { query, req } = context;\r\n  const { nextPage } = query;\r\n  const { origin } = absoluteUrl(req);\r\n\r\n  const token = getAppCookies(req).token || '';\r\n  const referer = req.headers.referer || '';\r\n\r\n  const nextPageUrl = !isNaN(nextPage) ? `?nextPage=${nextPage}` : '';\r\n  const baseApiUrl = `${origin}/api`;\r\n\r\n  const postsApi = await fetch(`${baseApiUrl}/post${nextPageUrl}`, {\r\n    headers: {\r\n      authorization: token || '',\r\n    },\r\n  });\r\n\r\n  const posts = await postsApi.json();\r\n\r\n  return {\r\n    props: {\r\n      origin,\r\n      referer,\r\n      token,\r\n      posts,\r\n    },\r\n  };\r\n}\r\n\r\nexport default Post;\r\n"]},"metadata":{},"sourceType":"module"}