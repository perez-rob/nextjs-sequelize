{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useEffect, useState } from 'react';\nimport Cookies from 'js-cookie';\nimport Link from 'next/link';\nimport Router, { useRouter } from 'next/router';\n/* utils */\n\nimport { absoluteUrl } from '../../middleware/utils';\n/* components */\n\nimport Layout from '../../components/layout/Layout';\n\nfunction User(props) {\n  const router = useRouter();\n  const {\n    origin,\n    referer,\n    user\n  } = props;\n  const {\n    0: titlePage,\n    1: setTitlePage\n  } = useState('Profile');\n  useEffect(() => {\n    switch (router.asPath) {\n      case '/user/logout':\n        Cookies.remove('token');\n        Router.push({\n          pathname: '/',\n          query: {}\n        }, '/');\n        break;\n\n      case '/user/login':\n        setTitlePage('Login');\n        break;\n\n      case '/user/register':\n        setTitlePage('Register');\n        break;\n    }\n  }, []);\n  return __jsx(Layout, {\n    title: `Next.js with Sequelize | User Page - ${titlePage}`,\n    url: `${origin}${router.asPath}`,\n    origin: origin\n  }, __jsx(\"div\", {\n    className: \"container\"\n  }, __jsx(\"main\", {\n    className: \"content-detail\"\n  }, __jsx(Link, {\n    href: {\n      pathname: '/user'\n    }\n  }, __jsx(\"a\", null, \"\\u2190 Back\")), user.data && __jsx(React.Fragment, null, __jsx(\"h1\", null, user.data.firstName || '', \" \", user.data.lastName || '', \" @\", user.data.username), __jsx(\"h3\", {\n    className: \"sub-title\"\n  }, user.data.email, __jsx(\"small\", {\n    style: {\n      display: 'block',\n      fontWeight: 'normal',\n      marginTop: '.75rem'\n    }\n  }, \"Member since \", user.data.createdAt)), user.data.posts.length > 0 && __jsx(\"div\", {\n    className: \"grid\"\n  }, __jsx(\"h2\", null, \"Latest Posts\"), user.data.posts.map((post, m) => {\n    return __jsx(Link, {\n      key: m,\n      href: {\n        pathname: `/post/${post.slug}`,\n        query: {}\n      }\n    }, __jsx(\"a\", {\n      className: \"card\"\n    }, __jsx(\"h4\", null, post.title), __jsx(\"span\", null, post.createdAt)));\n  })) || __jsx(\"small\", {\n    style: {\n      color: '#999999'\n    }\n  }, \"No latest posts\"), user.data.jobs.length > 0 && __jsx(\"div\", {\n    className: \"grid\"\n  }, __jsx(\"h2\", null, \"Latest Jobs\"), user.data.jobs.map((job, m) => {\n    return __jsx(Link, {\n      key: m,\n      href: {\n        pathname: `/job/${job.slug}`,\n        query: {}\n      }\n    }, __jsx(\"a\", {\n      className: \"card\"\n    }, __jsx(\"h4\", null, job.title), __jsx(\"span\", null, __jsx(\"small\", null, job.content)), __jsx(\"span\", null, __jsx(\"small\", null, job.reportManager)), __jsx(\"span\", null, __jsx(\"small\", null, job.emailTo)), __jsx(\"span\", null, __jsx(\"span\", null, job.createdAt))));\n  })) || __jsx(\"small\", {\n    style: {\n      marginLeft: '.5rem',\n      color: '#999999'\n    }\n  }, \"No latest jobs\")))));\n}\n/* getServerSideProps */\n\n\nexport async function getServerSideProps(context) {\n  const {\n    query,\n    req\n  } = context;\n  const {\n    origin\n  } = absoluteUrl(req);\n  const referer = req.headers.referer || '';\n  const baseApiUrl = `${origin}/api`;\n  let user = {};\n\n  if (query.slug !== 'logout') {\n    const userApi = await fetch(`${baseApiUrl}/user/${query.slug}`);\n    user = await userApi.json();\n  }\n\n  return {\n    props: {\n      origin,\n      referer,\n      user\n    }\n  };\n}\nexport default User;","map":null,"metadata":{},"sourceType":"module"}