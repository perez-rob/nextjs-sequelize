{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{\"HaE+\":function(t,e,a){\"use strict\";function n(t,e,a,n,r,o,i){try{var l=t[o](i),c=l.value}catch(s){return void a(s)}l.done?e(c):Promise.resolve(c).then(n,r)}function r(t){return function(){var e=this,a=arguments;return new Promise((function(r,o){var i=t.apply(e,a);function l(t){n(i,r,o,l,c,\"next\",t)}function c(t){n(i,r,o,l,c,\"throw\",t)}l(void 0)}))}}a.d(e,\"a\",(function(){return r}))},Kvub:function(t,e,a){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/post/[slug]\",function(){return a(\"U1TB\")}])},U1TB:function(t,e,a){\"use strict\";a.r(e),a.d(e,\"__N_SSP\",(function(){return O}));var n=a(\"o0o1\"),r=a.n(n),o=a(\"rePB\"),i=a(\"HaE+\"),l=a(\"q1tI\"),c=a.n(l),s=a(\"YFqc\"),u=a.n(s),d=a(\"nOHt\"),m=a(\"oHpw\"),v=c.a.createElement;var p=function(t){var e=t.onSubmit,a=t.onChange,n=t.loading,r=t.stateFormData,o=t.stateFormError,i=(t.stateFormValid,t.stateFormMessage);return v(\"form\",{onSubmit:e,className:\"form-post card\",method:\"POST\"},v(\"div\",{className:\"form-group\"},v(\"h2\",null,\"Form Post\"),v(\"hr\",null),\"error\"===i.status&&v(\"h4\",{className:\"warning text-center\"},i.error)),v(\"div\",{className:\"form-group\"},v(\"label\",{htmlFor:\"title\"},\"Title\"),v(\"input\",{className:\"form-control\",type:\"text\",id:\"title\",name:\"title\",placeholder:\"Post Title\",onChange:a,readOnly:n&&!0,value:r.title.value}),o.title&&v(\"span\",{className:\"warning\"},o.title.hint)),v(\"div\",{className:\"form-group\"},v(\"label\",{htmlFor:\"text\"},\"Content\"),v(\"textarea\",{className:\"form-control\",type:\"text\",id:\"text\",name:\"content\",placeholder:\"Post Content\",onChange:a,readOnly:n&&!0,value:r.content.value}),o.content&&v(\"span\",{className:\"warning\"},o.content.hint)),v(\"div\",null,v(\"button\",{type:\"submit\",className:\"btn btn-block btn-warning\",disabled:n},n?\"Submitting...\":\"Submit\")))},b=c.a.createElement;function f(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function h(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?f(Object(a),!0).forEach((function(e){Object(o.a)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var g={title:{value:\"\",label:\"Title\",min:10,max:36,required:!0,validator:{regEx:/^[a-z\\sA-Z0-9\\W\\w]+$/,error:\"Please insert valid Title\"}},content:{value:\"\",label:\"Content\",min:6,max:1500,required:!0,validator:{regEx:/^[a-z\\sA-Z0-9\\W\\w]+$/,error:\"Please insert valid Content\"}}};var O=!0;e.default=function(t){var e=Object(d.useRouter)(),a=t.origin,n=t.post,s=t.token,v=t.baseApiUrl,f=Object(l.useState)(!1),O=f[0],y=f[1],w=Object(l.useState)(g),j=w[0],P=w[1],x=Object(l.useState)([]),N=x[0],F=x[1],S=Object(l.useState)({}),E=S[0],T=S[1],k=Object(l.useState)(!1),q=k[0],C=k[1];function I(t){return _.apply(this,arguments)}function _(){return(_=Object(i.a)(r.a.mark((function t(a){var n,o,i;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),n=h({},j),n=h(h({},n),{},{title:n.title.value||\"\"}),n=h(h({},n),{},{content:n.content.value||\"\"}),!B(j)){t.next=15;break}return y(!O),t.next=9,fetch(\"\".concat(v,\"/post/[slug]\"),{method:\"POST\",headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\",authorization:s||\"\"},body:JSON.stringify(n)});case 9:return o=t.sent,t.next=12,o.json();case 12:(i=t.sent).message&&i.data&&\"done\"===i.message?e.push({pathname:i.data.slug?\"/post/\".concat(i.data.slug):\"/post\"}):T(i),y(!1);case 15:case\"end\":return t.stop()}}),t)})))).apply(this,arguments)}function D(t){var e=t.currentTarget,a=e.name,n=e.value;P(h(h({},j),{},Object(o.a)({},a,h(h({},j[a]),{},{value:n})))),B(j,t)}function B(t,e){var a=e&&e.target.name||\"\",n=[],r=!0;return a?(t[a].required&&(t[a].value||(n[a]={hint:\"\".concat(t[e.target.name].label,\" required\"),isInvalid:!0},r=!1)),t[a].value&&t[a].min>t[a].value.length&&(n[a]={hint:\"Field \".concat(t[a].label,\" min \").concat(t[a].min),isInvalid:!0},r=!1),t[a].value&&t[a].max<t[a].value.length&&(n[a]={hint:\"Field \".concat(t[a].label,\" max \").concat(t[a].max),isInvalid:!0},r=!1),null!==t[a].validator&&\"object\"===typeof t[a].validator&&t[a].value&&!t[a].validator.regEx.test(t[a].value)&&(n[a]={hint:t[a].validator.error,isInvalid:!0},r=!1)):Object.entries(t).forEach((function(t){t.forEach((function(e){n[t[0]]=\"\",e.required&&(e.value||(n[t[0]]={hint:\"\".concat(e.label,\" required\"),isInvalid:!0},r=!1)),e.value&&e.min>=e.value.length&&(n[t[0]]={hint:\"Field \".concat(e.label,\" min \").concat(e.min),isInvalid:!0},r=!1),e.value&&e.max<=e.value.length&&(n[t[0]]={hint:\"Field \".concat(e.label,\" max \").concat(e.max),isInvalid:!0},r=!1),null!==e.validator&&\"object\"===typeof e.validator&&e.value&&!e.validator.regEx.test(e.value)&&(n[t[0]]={hint:e.validator.error,isInvalid:!0},r=!1)}))})),r&&C(r),F(h({},n)),r}return b(m.a,{title:\"Next.js with Sequelize | Post Page - \".concat(n.data&&n.data.title),url:\"\".concat(a).concat(e.asPath),origin:a},b(\"div\",{className:\"container\"},b(\"main\",{className:\"content-detail\"},\"/post/add\"===e.asPath?b(c.a.Fragment,null,b(u.a,{href:{pathname:\"/post\"}},b(\"a\",null,\"\\u2190 Back\")),b(p,{onSubmit:I,onChange:D,loading:O,stateFormData:j,stateFormError:N,stateFormValid:q,stateFormMessage:E})):n.data?b(\"div\",{className:\"card\"},b(u.a,{href:{pathname:\"/post\"}},b(\"a\",null,\"\\u2190 Back\")),b(\"h2\",{className:\"sub-title\",style:{display:\"block\",marginTop:\".75rem\"}},n.data.title,b(\"small\",{style:{display:\"block\",fontWeight:\"normal\",marginTop:\".75rem\"}},\"Posted: \",n.data.createdAt)),b(\"p\",null,n.data.content),b(\"hr\",null),\"By: \",n.data.user.firstName||\"\",\" \",n.data.user.lastName||\"\"):b(\"div\",{className:\"container\"},b(\"div\",{class:\"card\"},\"Data Not Found\")))))}},rePB:function(t,e,a){\"use strict\";function n(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}a.d(e,\"a\",(function(){return n}))}},[[\"Kvub\",0,2,1,3]]]);","extractedComments":[]}