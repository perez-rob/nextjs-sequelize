{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{\"8BF3\":function(e,t,n){\"use strict\";n.r(t),n.d(t,\"__N_SSP\",(function(){return j}));var r=n(\"o0o1\"),a=n.n(r),o=n(\"HaE+\"),i=n(\"rePB\"),c=n(\"q1tI\"),l=n.n(c),s=n(\"YFqc\"),u=n.n(s),d=n(\"nOHt\"),p=n.n(d),f=n(\"p46w\"),m=n.n(f),v=n(\"oHpw\"),h=l.a.createElement;var b=function(e){var t=e.props,n=t.onSubmitHandler,r=t.onChangeHandler,a=t.loading,o=t.stateFormData,i=t.stateFormError,c=t.stateFormMessage;return h(\"form\",{className:\"form-login card\",method:\"POST\",onSubmit:n},h(\"div\",{className:\"form-group\"},h(\"h2\",null,\"Login\"),h(\"hr\",null),\"error\"===c.status&&h(\"h4\",{className:\"warning text-center\"},c.error)),h(\"div\",{className:\"form-group\"},h(\"label\",{htmlFor:\"email\"},\"Email\"),h(\"input\",{className:\"form-control\",type:\"text\",id:\"email\",name:\"email\",placeholder:\"Email\",onChange:r,readOnly:a&&!0,value:o.email.value}),i.email&&h(\"span\",{className:\"warning\"},i.email.hint)),h(\"div\",{className:\"form-group\"},h(\"label\",{htmlFor:\"password\"},\"Password\"),h(\"input\",{className:\"form-control\",type:\"password\",id:\"password\",name:\"password\",placeholder:\"Password\",onChange:r,readOnly:a&&!0,value:o.email.password}),i.password&&h(\"span\",{className:\"warning\"},i.password.hint)),h(\"div\",null,h(\"button\",{type:\"submit\",className:\"btn btn-block btn-warning\",disabled:a},a?\"Loading...\":\"Login\")))},g=l.a.createElement;function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y={email:{value:\"\",label:\"Email\",min:10,max:36,required:!0,validator:{regEx:/^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,2|3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/,error:\"Please insert valid email\"}},password:{value:\"\",label:\"Password\",min:6,max:36,required:!0,validator:{regEx:/^[a-z\\sA-Z0-9\\W\\w]+$/,error:\"Please insert valid password\"}}};var j=!0;t.default=function(e){var t=Object(d.useRouter)(),n=e.origin,r=(e.referer,e.baseApiUrl),l=Object(c.useState)(!1),s=l[0],f=l[1],h=Object(c.useState)(y),w=h[0],j=h[1],x=Object(c.useState)([]),P=x[0],E=x[1],S=Object(c.useState)(!1),N=(S[0],S[1]),C=Object(c.useState)({}),k=C[0],F=C[1];function I(){return(I=Object(o.a)(a.a.mark((function e(t){var n,o,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=O({},w),n=O(O({},n),{},{email:n.email.value||\"\"}),n=O(O({},n),{},{password:n.password.value||\"\"}),!D(w)){e.next=15;break}return f(!s),e.next=9,fetch(\"\".concat(r,\"/auth\"),{method:\"POST\",headers:{Accept:\"application/json\",\"Content-Type\":\"application/json\"},body:JSON.stringify(n)}).catch((function(e){console.error(\"Error:\",e)}));case 9:return o=e.sent,e.next=12,o.json();case 12:(i=e.sent).success&&i.token?(m.a.set(\"token\",i.token),p.a.push(\"/\")):F(i),f(!1);case 15:case\"end\":return e.stop()}}),e)})))).apply(this,arguments)}function D(e,t){var n=t&&t.target.name||\"\",r=[],a=!0;return n?(e[n].required&&(e[n].value||(r[n]={hint:\"\".concat(e[t.target.name].label,\" required\"),isInvalid:!0},a=!1)),e[n].value&&e[n].min>e[n].value.length&&(r[n]={hint:\"Field \".concat(e[n].label,\" min \").concat(e[n].min),isInvalid:!0},a=!1),e[n].value&&e[n].max<e[n].value.length&&(r[n]={hint:\"Field \".concat(e[n].label,\" max \").concat(e[n].max),isInvalid:!0},a=!1),null!==e[n].validator&&\"object\"===typeof e[n].validator&&e[n].value&&!e[n].validator.regEx.test(e[n].value)&&(r[n]={hint:e[n].validator.error,isInvalid:!0},a=!1)):Object.entries(e).forEach((function(e){e.forEach((function(t){r[e[0]]=\"\",t.required&&(t.value||(r[e[0]]={hint:\"\".concat(t.label,\" required\"),isInvalid:!0},a=!1)),t.value&&t.min>=t.value.length&&(r[e[0]]={hint:\"Field \".concat(t.label,\" min \").concat(t.min),isInvalid:!0},a=!1),t.value&&t.max<=t.value.length&&(r[e[0]]={hint:\"Field \".concat(t.label,\" max \").concat(t.max),isInvalid:!0},a=!1),null!==t.validator&&\"object\"===typeof t.validator&&t.value&&!t.validator.regEx.test(t.value)&&(r[e[0]]={hint:t.validator.error,isInvalid:!0},a=!1)}))})),a&&N(a),E(O({},r)),a}return g(v.a,{title:\"Next.js with Sequelize | Login page\",url:\"\".concat(n).concat(t.asPath),origin:n},g(\"div\",{className:\"container\"},g(\"main\",{className:\"content-detail\"},g(u.a,{href:{pathname:\"/user\"}},g(\"a\",null,\"\\u2190 Back\")),g(b,{props:{onSubmitHandler:function(e){return I.apply(this,arguments)},onChangeHandler:function(e){var t=e.currentTarget,n=t.name,r=t.value;j(O(O({},w),{},Object(i.a)({},n,O(O({},w[n]),{},{value:r})))),D(w,e)},loading:s,stateFormData:w,stateFormError:P,stateFormMessage:k}}))))}},\"HaE+\":function(e,t,n){\"use strict\";function r(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,a)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(a,o){var i=e.apply(t,n);function c(e){r(i,a,o,c,l,\"next\",e)}function l(e){r(i,a,o,c,l,\"throw\",e)}c(void 0)}))}}n.d(t,\"a\",(function(){return a}))},p46w:function(e,t,n){var r,a;!function(o){if(void 0===(a=\"function\"===typeof(r=o)?r.call(t,n,t,e):r)||(e.exports=a),!0,e.exports=o(),!!0){var i=window.Cookies,c=window.Cookies=o();c.noConflict=function(){return window.Cookies=i,c}}}((function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}function t(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function n(r){function a(){}function o(t,n,o){if(\"undefined\"!==typeof document){\"number\"===typeof(o=e({path:\"/\"},a.defaults,o)).expires&&(o.expires=new Date(1*new Date+864e5*o.expires)),o.expires=o.expires?o.expires.toUTCString():\"\";try{var i=JSON.stringify(n);/^[\\{\\[]/.test(i)&&(n=i)}catch(s){}n=r.write?r.write(n,t):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\\(\\)]/g,escape);var c=\"\";for(var l in o)o[l]&&(c+=\"; \"+l,!0!==o[l]&&(c+=\"=\"+o[l].split(\";\")[0]));return document.cookie=t+\"=\"+n+c}}function i(e,n){if(\"undefined\"!==typeof document){for(var a={},o=document.cookie?document.cookie.split(\"; \"):[],i=0;i<o.length;i++){var c=o[i].split(\"=\"),l=c.slice(1).join(\"=\");n||'\"'!==l.charAt(0)||(l=l.slice(1,-1));try{var s=t(c[0]);if(l=(r.read||r)(l,s)||t(l),n)try{l=JSON.parse(l)}catch(u){}if(a[s]=l,e===s)break}catch(u){}}return e?a[e]:a}}return a.set=o,a.get=function(e){return i(e,!1)},a.getJSON=function(e){return i(e,!0)},a.remove=function(t,n){o(t,\"\",e(n,{expires:-1}))},a.defaults={},a.withConverter=n,a}((function(){}))}))},rWja:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/user/login\",function(){return n(\"8BF3\")}])},rePB:function(e,t,n){\"use strict\";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,\"a\",(function(){return r}))}},[[\"rWja\",0,2,1,3]]]);","extractedComments":[]}