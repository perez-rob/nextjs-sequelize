(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{C7HZ:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/job/[slug]",function(){return a("iFRT")}])},"HaE+":function(e,t,a){"use strict";function n(e,t,a,n,r,i,o){try{var l=e[i](o),c=l.value}catch(s){return void a(s)}l.done?t(c):Promise.resolve(c).then(n,r)}function r(e){return function(){var t=this,a=arguments;return new Promise((function(r,i){var o=e.apply(t,a);function l(e){n(o,r,i,l,c,"next",e)}function c(e){n(o,r,i,l,c,"throw",e)}l(void 0)}))}}a.d(t,"a",(function(){return r}))},iFRT:function(e,t,a){"use strict";a.r(t),a.d(t,"__N_SSP",(function(){return j}));var n=a("o0o1"),r=a.n(n),i=a("rePB"),o=a("HaE+"),l=a("q1tI"),c=a.n(l),s=a("YFqc"),u=a.n(s),m=a("nOHt"),d=a("oHpw"),p=c.a.createElement;var v=function(e){var t=e.onSubmit,a=e.onChange,n=e.loading,r=e.stateFormData,i=e.stateFormError,o=(e.stateFormValid,e.stateFormMessage);return p("form",{onSubmit:t,className:"form-job card",method:"POST"},p("div",{className:"form-group"},p("h2",null,"Form Job"),p("hr",null),"error"===o.status&&p("h4",{className:"warning text-center"},o.error)),p("div",{className:"form-group"},p("label",{htmlFor:"title"},"Title"),p("input",{className:"form-control",type:"text",id:"title",name:"title",placeholder:"Job Title",onChange:a,value:r.title.value}),i.title&&p("span",{className:"warning"},i.title.hint)),p("div",{className:"form-group"},p("label",{htmlFor:"text"},"Text"),p("textarea",{className:"form-control",type:"text",id:"text",name:"content",placeholder:"Post Text",onChange:a,value:r.content.value}),i.content&&p("span",{className:"warning"},i.content.hint)),p("div",{className:"form-group"},p("label",{htmlFor:"text"},"Job Report Manager"),p("input",{className:"form-control",type:"text",id:"text",name:"reportManager",placeholder:"Job Report Manager",onChange:a,readOnly:n&&!0,value:r.reportManager.value}),i.reportManager&&p("span",{className:"warning"},i.reportManager.hint)),p("div",{className:"form-group"},p("label",{htmlFor:"text"},"Date Limit"),p("input",{className:"form-control",type:"text",id:"text",name:"dateLimit",placeholder:"Job Date Limit",onChange:a,readOnly:n&&!0,value:r.dateLimit.value}),i.dateLimit&&p("span",{className:"warning"},i.dateLimit.hint)),p("div",null,p("button",{type:"submit",className:"btn btn-block btn-warning",disabled:n},n?"Submitting...":"Submit")))},b=c.a.createElement;function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function h(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var f={title:{value:"",label:"Title",min:10,max:36,required:!0,validator:{regEx:/^[a-z\sA-Z0-9\W\w]+$/,error:"Please insert valid Title"}},content:{value:"",label:"Content",min:6,max:1500,required:!0,validator:{regEx:/^[a-z\sA-Z0-9\W\w]+$/,error:"Please insert valid Content"}},reportManager:{value:"",label:"Content",min:6,max:1500,required:!0,validator:{regEx:/^[a-z\sA-Z0-9\W\w]+$/,error:"Please insert valid Report Manager"}},dateLimit:{value:"",label:"Date",min:6,max:24,required:!0,validator:{regEx:/^[a-z\sA-Z0-9\W\w]+$/,error:"Please insert valid Date limit"}}};var j=!0;t.default=function(e){var t=Object(m.useRouter)(),a=e.origin,n=e.job,s=e.token,p=e.baseApiUrl,g=Object(l.useState)(!1),j=g[0],x=g[1],O=Object(l.useState)(f),w=O[0],y=O[1],N=Object(l.useState)([]),P=N[0],F=N[1],E=Object(l.useState)({}),S=E[0],T=E[1],M=Object(l.useState)(!1),C=M[0],k=M[1];function q(e){return D.apply(this,arguments)}function D(){return(D=Object(o.a)(r.a.mark((function e(a){var n,i,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),n=h({},w),n=h(h({},n),{},{title:n.title.value||""}),n=h(h({},n),{},{content:n.content.value||""}),n=h(h({},n),{},{reportManager:n.reportManager.value||""}),n=h(h({},n),{},{dateLimit:n.dateLimit.value||""}),!I(w)){e.next=17;break}return x(!j),e.next=11,fetch("".concat(p,"/job/[slug]"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",authorization:s||""},body:JSON.stringify(n)});case 11:return i=e.sent,e.next=14,i.json();case 14:"success"===(o=e.sent).status&&o.message&&"done"===o.message&&o.data?t.push({pathname:o.data.slug?"/job/".concat(o.data.slug):"/job"}):T(o),x(!1);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(e){var t=e.currentTarget,a=t.name,n=t.value;y(h(h({},w),{},Object(i.a)({},a,h(h({},w[a]),{},{value:n})))),I(w,e)}function I(e,t){var a=t&&t.target.name||"",n=[],r=!0;return a?(e[a].required&&(e[a].value||(n[a]={hint:"".concat(e[t.target.name].label," required"),isInvalid:!0},r=!1)),e[a].value&&e[a].min>e[a].value.length&&(n[a]={hint:"Field ".concat(e[a].label," min ").concat(e[a].min),isInvalid:!0},r=!1),e[a].value&&e[a].max<e[a].value.length&&(n[a]={hint:"Field ".concat(e[a].label," max ").concat(e[a].max),isInvalid:!0},r=!1),null!==e[a].validator&&"object"===typeof e[a].validator&&e[a].value&&!e[a].validator.regEx.test(e[a].value)&&(n[a]={hint:e[a].validator.error,isInvalid:!0},r=!1)):Object.entries(e).forEach((function(e){e.forEach((function(t){n[e[0]]="",t.required&&(t.value||(n[e[0]]={hint:"".concat(t.label," required"),isInvalid:!0},r=!1)),t.value&&t.min>=t.value.length&&(n[e[0]]={hint:"Field ".concat(t.label," min ").concat(t.min),isInvalid:!0},r=!1),t.value&&t.max<=t.value.length&&(n[e[0]]={hint:"Field ".concat(t.label," max ").concat(t.max),isInvalid:!0},r=!1),null!==t.validator&&"object"===typeof t.validator&&t.value&&!t.validator.regEx.test(t.value)&&(n[e[0]]={hint:t.validator.error,isInvalid:!0},r=!1)}))})),r&&k(r),F(h({},n)),r}return b(d.a,{title:"Next.js with Sequelize | Job Page - ".concat(n.data&&n.data.title),url:"".concat(a).concat(t.asPath),origin:a},b("div",{className:"container"},b("main",{className:"content-detail"},"/job/add"===t.asPath?b(c.a.Fragment,null,b(u.a,{href:{pathname:"/job"}},b("a",null,"\u2190 Back")),b(v,{onSubmit:q,onChange:L,loading:j,stateFormData:w,stateFormError:P,stateFormValid:C,stateFormMessage:S})):b("div",{className:"card"},b(u.a,{href:{pathname:"/job"}},b("a",null,"\u2190 Back")),b("h2",{className:"sub-title",style:{display:"block",marginTop:".75rem"}},n.data.title,b("small",{style:{display:"block",fontWeight:"normal",marginTop:".75rem"}},"Posted: ",n.data.createdAt)),b("p",null,n.data.content),b("p",null,"Email: ",n.data.emailTo),b("p",null,"Report to: ",n.data.reportManager),b("p",null,"Limit :",n.data.dateLimit),b("hr",null),"By: ",n.data.user.firstName||""," ",n.data.user.lastName||""))))}},rePB:function(e,t,a){"use strict";function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a.d(t,"a",(function(){return n}))}},[["C7HZ",0,2,1,3]]]);